# Chronicle Zero-Configuration Quick Start

Get Chronicle running in under 5 minutes with automatic configuration, no API keys required upfront.

## Overview

The quick-start script provides a streamlined way to launch Chronicle with:
- **Auto-generated credentials** - Secure admin account created automatically
- **Graceful degradation** - System works without API keys, features disabled until configured
- **Separate infrastructure** - Database services persist across application restarts
- **Web-based configuration** - Add API keys through the dashboard UI

## Prerequisites

- **Docker** and **Docker Compose** installed
- **Git** for cloning the repository
- **Ports available**: 4000 (web UI), 9000 (backend), 27017 (MongoDB), 6379 (Redis), 6333/6334 (Qdrant)

## Quick Start

### 1. Clone and Start

```bash
git clone https://github.com/chronicle-ai/chronicle.git
cd chronicle
./quick-start.sh
```

### 2. Access the Dashboard

The script will display your login credentials. Navigate to:

**http://localhost:3000**

Log in with the credentials shown in the terminal output.

### 3. Configure API Keys (Optional)

Navigate to **System** page in the web dashboard and scroll to **API Key Configuration**:

1. **OpenAI API Key** - For memory extraction and chat features
2. **Deepgram API Key** - For audio transcription
3. **Mistral API Key** - Alternative transcription provider (optional)

Click **Save API Keys** and restart services:

```bash
make restart
```

## Feature Availability

### Without API Keys (Quick Start Mode)

✅ **Working:**
- User authentication and management
- Audio file uploads
- Basic system monitoring
- Database operations

⚠️ **Limited:**
- Audio transcription (disabled)
- Memory extraction (disabled)
- Chat features (disabled)

### With API Keys (Full Features)

✅ **All features enabled:**
- Real-time audio transcription
- Automatic memory extraction
- Semantic memory search
- Chat interface with context
- Action item detection

## Docker Compose Architecture

Chronicle uses **two separate compose files** for infrastructure and application:

### Infrastructure Layer (`docker-compose.infra.yml`)
Persistent database services in separate project (`infra`):
- **MongoDB** (`mongo` container) - User data and conversations
- **Redis** (`redis` container) - Job queues and caching
- **Qdrant** (`qdrant` container) - Vector storage for memories
- **Neo4j** (optional, `--profile neo4j`) - Graph database
- **Caddy** (optional, `--profile caddy`) - Reverse proxy

### Application Layer (`docker-compose.yml`)
Application services in separate project (`chronicle`):
- **Backend API** - FastAPI server
- **Workers** - Background job processors
- **Web UI** - React dashboard

### How They Work Together
- Infrastructure runs in its own project with named containers (`mongo`, `redis`, `qdrant`)
- Application runs in a separate project (`chronicle`)
- Both share the `chronicle-network` bridge network
- Application services reference infrastructure by container name
- You can stop/restart the app without affecting databases

## Common Commands

### Standard Docker Workflow

```bash
# First time: Start infrastructure then application
docker compose -f docker-compose.infra.yml up -d
docker compose up -d

# Daily development: Start application only (requires infra running)
docker compose up -d

# Rebuild after code changes
docker compose build
docker compose up -d

# Restart application (super fast!)
docker compose restart

# Stop application only (keeps infrastructure running)
docker compose down

# Stop everything (infrastructure + application)
docker compose down
docker compose -f docker-compose.infra.yml down

# View application logs
docker compose logs -f
```

### Using Make Targets (Recommended)

The Makefile simplifies the workflow:

```bash
# Start Chronicle (auto-starts infrastructure if needed)
make up

# Stop application only (keeps infrastructure)
make down

# Stop everything (infrastructure + application)
make down-all

# Rebuild application images
make build

# Restart application only (fast!)
make restart

# Restart everything
make restart-all

# View application logs
make logs

# View all logs (infrastructure + application)
make logs-all
```

### Infrastructure Control

```bash
# Start infrastructure only
make infra-start
# or
docker compose --profile infra up -d mongo redis qdrant

# Stop infrastructure (keeps data volumes)
make infra-stop
# or
docker compose stop mongo redis qdrant

# Remove infrastructure and all data
make infra-clean
# or
docker compose --profile infra down -v
```

## Configuration Files

### `.env.default`
Auto-generated by `quick-start.sh`, contains:
- Admin credentials
- Database connection strings
- Port configuration
- Feature flags
- API keys (added later via UI)

**⚠️ Security Note**: This file contains sensitive credentials and is git-ignored. Never commit it to version control.

### `config-defaults.yml`
Sensible defaults for all services. Can be customized for advanced configuration.

## Resetting Configuration

To start over with fresh configuration:

```bash
./quick-start.sh --reset
```

This will:
1. Prompt for new admin credentials
2. Generate new authentication secrets
3. Restart all services with fresh configuration

## Troubleshooting

### Services Won't Start

**Check Docker is running:**
```bash
docker ps
```

**Check port availability:**
```bash
# On Linux/Mac
lsof -i :4000
lsof -i :9000

# On Windows (PowerShell)
netstat -ano | findstr :4000
```

**View service logs:**
```bash
# All services
docker compose logs -f

# Specific service
docker compose logs -f friend-backend
```

### Network Warnings

If you see: `WARN[0000] a network with name chronicle-network exists...`

**Fix:**
```bash
docker network rm chronicle-network
./quick-start.sh
```

The script will recreate the network correctly.

### Application Not Responding

**Check backend health:**
```bash
curl http://localhost:8000/health
```

**Restart application:**
```bash
make restart
# or
docker compose restart
```

### Database Connection Issues

**Check infrastructure is running:**
```bash
docker compose -f docker-compose.infra.yml ps
```

**Restart infrastructure:**
```bash
make infra-stop
make infra-start
```

### "Permission Denied" Errors

**On Linux, try:**
```bash
sudo ./quick-start.sh
```

**For Docker permission issues:**
```bash
# Add your user to docker group
sudo usermod -aG docker $USER

# Log out and back in, then try again
```

## Upgrading

To upgrade Chronicle to the latest version:

```bash
# Pull latest code
git pull origin main

# Rebuild application
make build

# Restart
make restart
```

**Note**: Infrastructure services (MongoDB, Redis, Qdrant) don't need rebuilding - your data persists across upgrades.

## Advanced Configuration

### Custom Ports

Edit `.env.default` to change ports:

```bash
BACKEND_PORT=9000      # Backend API
WEBUI_PORT=4000        # Web dashboard
```

Then restart:
```bash
make restart
```

### Enable Neo4j Graph Database

```bash
docker compose -f docker-compose.infra.yml --profile neo4j up -d
```

Access Neo4j browser at: **http://localhost:7474**
- Username: `neo4j`
- Password: `password` (or value of `NEO4J_PASSWORD` in `.env.default`)

### Production Deployment

For production, consider:

1. **Use strong passwords**: Edit `.env.default` with secure credentials
2. **Enable HTTPS**: Configure Caddy for SSL/TLS
3. **Set feature flags**:
   ```bash
   ALLOW_MISSING_API_KEYS=false
   LLM_REQUIRED=true
   TRANSCRIPTION_REQUIRED=true
   ```
4. **Backup data volumes**: Regular backups of MongoDB, Qdrant, and Redis data

## API Keys Reference

### OpenAI
- **Purpose**: LLM for memory extraction and chat
- **Get key**: [platform.openai.com/api-keys](https://platform.openai.com/api-keys)
- **Cost**: ~$1-5/month typical usage with gpt-4o-mini
- **Format**: `sk-...`

### Deepgram
- **Purpose**: Speech-to-text transcription
- **Get key**: [console.deepgram.com](https://console.deepgram.com/)
- **Free tier**: $200 credits
- **Format**: Alphanumeric string

### Mistral
- **Purpose**: Alternative transcription (Voxtral models)
- **Get key**: [console.mistral.ai](https://console.mistral.ai/)
- **Format**: Alphanumeric string

## Next Steps

After quick-start setup:

1. **Explore the Dashboard**
   - View system health on **System** page
   - Check **Conversations** for audio processing
   - Browse **Memories** for extracted information

2. **Test Audio Processing**
   - Use **Upload** page to process audio files
   - Or use **Live Recording** for microphone capture

3. **Connect Mobile App**
   - See [quickstart.md](quickstart.md#step-5-install-chronicle-on-your-phone) for phone setup
   - Configure backend URL in app settings

4. **Add Advanced Features**
   - Speaker recognition service
   - Offline ASR with Parakeet
   - Distributed deployment with Tailscale

## Further Reading

- **Full Documentation**: [CLAUDE.md](CLAUDE.md)
- **Complete Setup Guide**: [quickstart.md](quickstart.md)
- **Architecture Details**: [backends/advanced/Docs/README.md](backends/advanced/Docs/README.md)
- **Docker/Kubernetes**: [README-K8S.md](README-K8S.md)

## Getting Help

- **GitHub Issues**: [github.com/chronicle-ai/chronicle/issues](https://github.com/chronicle-ai/chronicle/issues)
- **Discussions**: [github.com/chronicle-ai/chronicle/discussions](https://github.com/chronicle-ai/chronicle/discussions)
